MooTools.More={version:"1.4.0.1",build:"a4244edf2aa97ac8a196fc96082dd35af1abab87"};
(function(){Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:!0},initialize:function(a,c){this.element=this.subject=document.id(a);this.parent(c);"element"!=typeOf(this.element)&&(this.element=document.id(this.element.getDocument().body));if(this.options.wheelStops){var d=this.element,b=this.cancel.pass(!1,this);this.addEvent("start",function(){d.addEvent("mousewheel",b)},!0);this.addEvent("complete",function(){d.removeEvent("mousewheel",b)},!0)}},set:function(){var a=Array.flatten(arguments);
Browser.firefox&&(a=[Math.round(a[0]),Math.round(a[1])]);this.element.scrollTo(a[0],a[1]);return this},compute:function(a,c,d){return[0,1].map(function(b){return Fx.compute(a[b],c[b],d)})},start:function(a,c){if(!this.check(a,c))return this;var d=this.element.getScroll();return this.parent([d.x,d.y],[a,c])},calculateScroll:function(a,c){var d=this.element,b=d.getScrollSize(),h=d.getScroll(),d=d.getSize(),g=this.options.offset,e={x:a,y:c},f;for(f in e)!e[f]&&0!==e[f]&&(e[f]=h[f]),"number"!=typeOf(e[f])&&
(e[f]=b[f]-d[f]),e[f]+=g[f];return[e.x,e.y]},toTop:function(){return this.start.apply(this,this.calculateScroll(!1,0))},toLeft:function(){return this.start.apply(this,this.calculateScroll(0,!1))},toRight:function(){return this.start.apply(this,this.calculateScroll("right",!1))},toBottom:function(){return this.start.apply(this,this.calculateScroll(!1,"bottom"))},toElement:function(a,c){var c=c?Array.from(c):["x","y"],d=/^(?:body|html)$/i.test(this.element.tagName)?{x:0,y:0}:this.element.getScroll(),
b=Object.map(document.id(a).getPosition(this.element),function(b,a){return c.contains(a)?b+d[a]:!1});return this.start.apply(this,this.calculateScroll(b.x,b.y))},toElementEdge:function(a,c,d){var c=c?Array.from(c):["x","y"],a=document.id(a),b={},h=a.getPosition(this.element),a=a.getSize(),g=this.element.getScroll(),e=this.element.getSize(),f={x:h.x+a.x,y:h.y+a.y};["x","y"].each(function(a){c.contains(a)&&(f[a]>g[a]+e[a]&&(b[a]=f[a]-e[a]),h[a]<g[a]&&(b[a]=h[a]));null==b[a]&&(b[a]=g[a]);d&&d[a]&&(b[a]+=
d[a])},this);(b.x!=g.x||b.y!=g.y)&&this.start(b.x,b.y);return this},toElementCenter:function(a,c,d){var c=c?Array.from(c):["x","y"],a=document.id(a),b={},h=a.getPosition(this.element),g=a.getSize(),e=this.element.getScroll(),f=this.element.getSize();["x","y"].each(function(a){c.contains(a)&&(b[a]=h[a]-(f[a]-g[a])/2);null==b[a]&&(b[a]=e[a]);d&&d[a]&&(b[a]+=d[a])},this);(b.x!=e.x||b.y!=e.y)&&this.start(b.x,b.y);return this}})})();
Fx.SmoothScroll=new Class({Extends:Fx.Scroll,options:{axes:["x","y"]},initialize:function(a,c){c=c||document;this.doc=c.getDocument();this.parent(this.doc,a);var d=c.getWindow(),b=d.location.href.match(/^[^#]*/)[0]+"#";$$(this.options.links||this.doc.links).each(function(a){if(0==a.href.indexOf(b)){var c=a.href.substr(b.length);c&&this.useLink(a,c)}},this);this.addEvent("complete",function(){d.location.hash=this.anchor;this.element.scrollTo(this.to[0],this.to[1])},!0)},useLink:function(a,c){a.addEvent("click",
function(d){var b=document.id(c)||this.doc.getElement("a[name="+c+"]");b&&(d.preventDefault(),this.toElement(b,this.options.axes).chain(function(){this.fireEvent("scrolledTo",[a,b])}.bind(this)),this.anchor=c)}.bind(this));return this}});
